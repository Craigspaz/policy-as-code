---
title: "DevSecOps Workflow"
weight: 61
---

## Overview
This section will explore using policy as code as a preventative measure. It will provide guardrails for IaC deployments. Policy as Code tools serve as gatekeepers to resource deployments that do not comply
with the policies an organization has established. There are many CI/CD tools that can be used to implement this workflow but for this workshop AWS CodePipeline will be used. The
concepts used here would be applicable to any CI/CD tool.

This pipeline will be used to deploy a compliant S3 bucket. Here is a typical policy that needs to be enforced:

>***AWS S3 buckets need to be deployed in a secure manner. We require encryption using strong and industry standard cryptography methods for data at rest and transit. - [NIST-800-53-SC-13](https://csrc.nist.gov/Projects/risk-management/sp800-53-controls/release-search#!/control?version=5.1&number=SC-13)
>There should be no public access and access should be restricted to the account that writes the data. Least privileged access should be enforced. - [NIST 800-53-8(2)](https://csrc.nist.gov/Projects/risk-management/sp800-53-controls/release-search#!/control?version=5.1&number=SA-8)***

An IaC developer will need to develop a set of rules to enforce the policy stated above. Here is a list of rules that will be used to enforce the policy above:
* ***Use S3 Block Public Access***
* ***Configure server-side encryption of S3 buckets***
* ***Use AWS managed keys for encryption of data in S3 bucket***
* ***Use a bucket policy to enforce HTTPS(TLS) connections only when reading or writing data***
* ***Use a bucket policy to enforce server-side encryption during object puts/writes to bucket***
* ***AWS KMS key used with the S3 bucket needs to have automatic rotation***
* ***AWS KMS key policy should not allow cross-account key access***

Fortunately the rules have already been written. The objective of this section of the workshop is to write the IaC code to pass the rules above. AWS Cloud Development Kit (CDK) will be used to deploy the S3 resource. Review of the AWS Cloudformation(CFN) templates that are generated by CDK will be used to see how they are violating the rules that are written. The CDK application will than be updated to pass the rules above. The outcome will be the successfully deployment of a compliant S3 bucket.

::alert[The AWS CodePipeline in this workshop is for educational and demo purposes only.]
